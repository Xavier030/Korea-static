<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‡°ğŸ‡· éŸ©å›½æ—…è¡Œæ”’é’±è®¡åˆ’</title>
    <link rel="stylesheet" href="./- Korea_files/bootstrap.min.css">
    <link rel="stylesheet" href="./- Korea_files/site.css">
    <link rel="stylesheet" href="./- Korea_files/Korea.styles.css">
    <style>
        body { background-color: #f8f9fa; }
        .piggy-bank {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin-bottom: 15px;
        }
    </style>
</head>
<body class="container py-4">

<header>
    <nav class="navbar navbar-expand-sm navbar-light bg-white border-bottom mb-3">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html">Korea</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target=".navbar-collapse">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse d-sm-inline-flex justify-content-between">
                <ul class="navbar-nav flex-grow-1">
                    <li class="nav-item"><a class="nav-link text-dark" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link text-dark" href="#">Map</a></li>
                </ul>
            </div>
        </div>
    </nav>
</header>

<div class="container">
    <main role="main" class="pb-3">

        <h1 class="text-center mb-4">ğŸ‡°ğŸ‡· éŸ©å›½æ—…è¡Œæ”’é’±è®¡åˆ’</h1>

        <h3>ğŸ’° æ”’é’±è¿›åº¦</h3>
        <div class="mb-4">
            <p>æ€»æ”’é’±è¿›åº¦ï¼š</p>
            <div class="progress mb-3">
                <div id="progressBar" class="progress-bar progress-bar-striped progress-bar-animated" style="width:0%">0%</div>
            </div>
        </div>

        <!-- åŠ¨æ€ç”Ÿæˆå­˜é’±ç›’çš„å®¹å™¨ -->
        <div class="row g-3" id="piggyRow"></div>

        <hr class="my-4">

        <h3>ğŸ“ To-Do List</h3>
        <div class="input-group mb-3">
            <input type="text" id="todoInput" class="form-control" placeholder="è¾“å…¥ç•™è¨€æˆ–è®¡åˆ’">
            <button class="btn btn-primary" onclick="addTodo()">æ·»åŠ </button>
        </div>
        <ul class="list-group mb-3" id="todoList"></ul>
        <button class="btn btn-secondary mb-4" onclick="clearTodos()">æ¸…ç©ºæ‰€æœ‰ To-Do</button>

    </main>
</div>

<footer class="border-top footer text-muted">
    <div class="container">
        Â© 2026 - Korea
    </div>
</footer>

<script src="./- Korea_files/jquery.min.js"></script>
<script src="./- Korea_files/bootstrap.bundle.min.js"></script>
<script src="./- Korea_files/site.js"></script>

<script>
    const people = [
        {name:"å‘¨", target:10000},
        {name:"ä½•", target:7000},
        {name:"æ²ˆ", target:10000},
        {name:"æ", target:20000}
    ];

    const row = document.getElementById("piggyRow");

    // åŠ¨æ€ç”Ÿæˆå­˜é’±ç›’
    people.forEach(p=>{
        const saved = Number(localStorage.getItem(p.name)) || 0;
        row.innerHTML += `
    <div class="col-md-3">
        <div class="piggy-bank text-center">
            <h5>${p.name}</h5>
            <p>ç›®æ ‡é‡‘é¢ï¼š<strong>ï¿¥${p.target}</strong></p>
            <p>å½“å‰é‡‘é¢ï¼š<strong>ï¿¥<span id="${p.name}-amount">${saved}</span></strong></p>
            <input type="number" class="form-control mb-2" id="${p.name}-input" placeholder="å­˜å…¥é‡‘é¢">
            <button class="btn btn-success w-100 mb-1" onclick="saveMoney('${p.name}',${p.target})">å­˜é’±</button>
            <input type="number" class="form-control mb-2" id="${p.name}-withdraw" placeholder="å–å‡ºé‡‘é¢">
            <button class="btn btn-warning w-100 mb-1" onclick="withdrawMoney('${p.name}')">å–é’±</button>
            <button class="btn btn-info w-100 mb-1" onclick="viewHistory('${p.name}')">æŸ¥çœ‹æ˜ç»†</button>
            <button class="btn btn-danger w-100" onclick="clearHistory('${p.name}')">æ¸…ç©ºæ˜ç»†</button>
        </div>
    </div>`;
    });

    // æ›´æ–°æ€»è¿›åº¦æ¡
    function updateProgress(){
        let totalSaved = 0;
        let totalTarget = 0;
        people.forEach(p=>{
            const saved = Number(localStorage.getItem(p.name)) || 0;
            totalSaved += saved;
            totalTarget += p.target;
        });
        const bar = document.getElementById("progressBar");
        const percent = Math.min((totalSaved/totalTarget)*100,100);
        bar.style.width = percent+"%";
        bar.innerText = `${Math.floor(percent)}%`;
    }

    // å­˜é’±
    function saveMoney(name,target){
        const input = document.getElementById(`${name}-input`);
        const amount = Number(input.value);
        if(amount<=0){ alert("è¯·è¾“å…¥æœ‰æ•ˆé‡‘é¢"); return; }
        let total = Number(localStorage.getItem(name))||0;
        total += amount;
        if(total>target){ total=target; }
        localStorage.setItem(name,total);
        document.getElementById(`${name}-amount`).innerText = total;
        input.value="";
        addTransaction(name,"å­˜å…¥",amount);
        updateProgress();
    }

    // å–é’±
    function withdrawMoney(name){
        const input = document.getElementById(`${name}-withdraw`);
        const amount = Number(input.value);
        let total = Number(localStorage.getItem(name))||0;
        if(amount<=0 || amount>total){ alert("é‡‘é¢æ— æ•ˆæˆ–è¶…è¿‡å½“å‰ä½™é¢"); return; }
        total -= amount;
        localStorage.setItem(name,total);
        document.getElementById(`${name}-amount`).innerText = total;
        input.value="";
        addTransaction(name,"å–å‡º",amount);
        updateProgress();
    }

    // è®°å½•äº¤æ˜“
    function addTransaction(name,type,amount){
        const records = JSON.parse(localStorage.getItem(name+"_records")) || [];
        records.push({type:type,amount:amount,date:new Date().toLocaleString()});
        localStorage.setItem(name+"_records",JSON.stringify(records));
    }

    // æŸ¥çœ‹æ˜ç»†
    function viewHistory(name){
        const records = JSON.parse(localStorage.getItem(name+"_records")) || [];
        let msg = `=== ${name} çš„å­˜å–æ˜ç»† ===\n`;
        if(records.length===0){ msg+="æ— è®°å½•"; }
        else{
            records.forEach(r=>{
                msg+=`${r.date} | ${r.type} ï¿¥${r.amount}\n`;
            });
        }
        alert(msg);
    }

    // æ¸…ç©ºæ˜ç»†
    function clearHistory(name){
        if(confirm(`ç¡®å®šè¦æ¸…ç©º ${name} çš„å­˜å–æ˜ç»†å—ï¼Ÿ`)){
            localStorage.removeItem(name+"_records");
            alert(`${name} çš„æ˜ç»†å·²æ¸…ç©º`);
        }
    }

    // ToDo
    function loadTodos(){
        const todos=JSON.parse(localStorage.getItem("todos"))||[];
        const list=document.getElementById("todoList");
        list.innerHTML="";
        todos.forEach((t,i)=>{
            list.innerHTML+=`
        <li class="list-group-item d-flex justify-content-between align-items-center">
            <div>
                <input type="checkbox" ${t.done?"checked":""} onchange="toggleTodo(${i})">
                <span class="${t.done?"text-decoration-line-through":""}">${t.text}</span>
            </div>
            <button class="btn btn-sm btn-danger" onclick="deleteTodo(${i})">åˆ é™¤</button>
        </li>`;
        });
    }

    function addTodo(){
        const input=document.getElementById("todoInput");
        if(!input.value) return;
        const todos=JSON.parse(localStorage.getItem("todos"))||[];
        todos.push({text:input.value,done:false});
        localStorage.setItem("todos",JSON.stringify(todos));
        input.value="";
        loadTodos();
    }

    function toggleTodo(index){
        const todos=JSON.parse(localStorage.getItem("todos"))||[];
        todos[index].done=!todos[index].done;
        localStorage.setItem("todos",JSON.stringify(todos));
        loadTodos();
    }

    function deleteTodo(index){
        const todos=JSON.parse(localStorage.getItem("todos"))||[];
        todos.splice(index,1);
        localStorage.setItem("todos",JSON.stringify(todos));
        loadTodos();
    }

    function clearTodos(){
        if(confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰ To-Do å—ï¼Ÿ")){
            localStorage.removeItem("todos");
            loadTodos();
        }
    }

    // é¡µé¢åˆå§‹åŒ–
    loadTodos();
    updateProgress();
</script>

</body>
</html>
